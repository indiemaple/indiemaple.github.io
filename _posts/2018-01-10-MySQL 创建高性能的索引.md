# MySQL 创建高性能的索引

## 什么是索引
我们可以把索引当成书籍的目录，我们想要知道书的特定的内容就要查看目录，然后定位页码
mysql的存储引擎采用类似的方法进行数据查询，先去索引中找到对应的值，然后根据匹配的索引找到对应的数据行

## 索引的类型
索引有很多的类型，都是实现在存储引擎层的
普通索引，最基本的索引，没有任何约束限制
唯一索引，与普通索引类似，但是具有唯一性约束 （一个表可以有多个唯一索引）
主键索引，特殊的唯一索引，不允许有空值 （一个表只能有一个主键索引， 主键还可以与外键构成参照完整性约束，反正数据不一致，而唯一索引不行）
组合索引，将多个列组合在一起创建索引，可以覆盖多个列
外键索引，只有 InnoDB 类型的表才能使用外键索引，保证数据的一致性，完整性和实现级联操作
全文索引，只能对英文进行全文检索，mysql 5.6 版本以前只能由于MyISAM，5.6版本以后InnoDB 也可以使用

## 索引对性能的影响

大大减少服务器对数据的扫描量
帮助服务器避免排序和临时表
将随机IO变成顺序IO
大大提高查询速率，但会降低写的速度（因为在对数据库进行写操作时，会额外的再操作一遍索引），并占用磁盘（因为索引本身也是一种数据）

## 索引的使用场景
对于非常小的表（比如只有几十个固定数据的表）来说，大部分情况下不使用索引，全盘扫描效率会更加的高
中到大型表，索引非常有效
特大型的表，建立和使用索引的代价会随之增加，可以使用分区技术来解决

##索引的创建原则

最适合索引的列是出现在WHERE子句当中的列或连接子句中的列，而不是出现在SELECT关键字后的列
索引列的基数越大，索引的效果越好
对字符串进行索引，应制定一个前缀长度，可以节省大量的索引空间
根据情况创建复合索引，复合索引可以提高查询效率
避免创建过多的索引，索引会额外的占用磁盘空间，降低写操作效率
主键尽可能选择较短的数据类型，可以有效的减少索引的磁盘占用，提高查询效率

## 索引的注意事项
复合索引遵循最左前缀原则
like查询，%号不能在前，可以使用全文索引
column is null 可以使用索引
如果mysql估计使用索引比全文扫描更加慢，会放弃使用索引
如果or前的条件中有列的索引，后面的没有，索引都不会被用到
列类型是字符串的话，查询时一定要给值加引号，否则索引失效